groups:
  - name: DataLight
    rules:
      - alert: NodeManagerDown
        expr: process_start_time_seconds{job="YARN-NodeManager"} == 0
        for: 10s
        labels:
          severity: warning
          hostname: |
            {{- $instance := $labels.instance }}
            {{- $instance | reReplaceAll "^(.*?)(\\..*)?$" "$1" }}
        annotations:
          summary: "{{ $labels.job }} 进程在 {{ $labels.hostname }} 宕机"
          description: "{{ $labels.job }} 进程在 {{ $labels.hostname }} 已经宕机超过5分钟"