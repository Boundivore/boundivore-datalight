groups:
  - name: DataLight
    rules:
      - alert: NameNodeDown
        expr: process_start_time_seconds{job="HDFS-NameNode"} == 0
        for: 10s
        labels:
          severity: critical
          hostname: |
            {{- $instance := $labels.instance }}
            {{- $instance | reReplaceAll "^(.*?)(\\..*)?$" "$1" }}
        annotations:
          summary: "{{ $labels.job }} 进程在 {{ $labels.hostname }} 宕机"
          description: "{{ $labels.job }} 进程在 {{ $labels.hostname }} 已经宕机超过5分钟"